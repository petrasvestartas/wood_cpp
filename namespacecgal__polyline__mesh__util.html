<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>WOOD: cgal_polyline_mesh_util Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">WOOD
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('namespacecgal__polyline__mesh__util.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">cgal_polyline_mesh_util Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a674e7fb633ab33270fc4287643dad4ed" id="r_a674e7fb633ab33270fc4287643dad4ed"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a674e7fb633ab33270fc4287643dad4ed">mesh_from_polylines</a> (const std::vector&lt; CGAL_Polyline &gt; &amp;polylines_with_holes, const IK::Plane_3 &amp;base_plane, std::vector&lt; int &gt; &amp;top_outline_face_vertex_indices, int &amp;v_count, int &amp;f_count)</td></tr>
<tr class="separator:a674e7fb633ab33270fc4287643dad4ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02b947af362cb7a2dcec7c44530d7d18" id="r_a02b947af362cb7a2dcec7c44530d7d18"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a02b947af362cb7a2dcec7c44530d7d18">closed_mesh_from_polylines_vnf</a> (const std::vector&lt; CGAL_Polyline &gt; &amp;polylines_with_holes_not_clean, std::vector&lt; float &gt; &amp;out_vertices, std::vector&lt; float &gt; &amp;out_normals, std::vector&lt; int &gt; &amp;out_triangles, const double &amp;scale)</td></tr>
<tr class="separator:a02b947af362cb7a2dcec7c44530d7d18"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a02b947af362cb7a2dcec7c44530d7d18" name="a02b947af362cb7a2dcec7c44530d7d18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02b947af362cb7a2dcec7c44530d7d18">&#9670;&#160;</a></span>closed_mesh_from_polylines_vnf()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cgal_polyline_mesh_util::closed_mesh_from_polylines_vnf </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; CGAL_Polyline &gt; &amp;</td>          <td class="paramname"><span class="paramname"><em>polylines_with_holes</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; float &gt; &amp;</td>          <td class="paramname"><span class="paramname"><em>out_vertices</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; float &gt; &amp;</td>          <td class="paramname"><span class="paramname"><em>out_normals</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; int &gt; &amp;</td>          <td class="paramname"><span class="paramname"><em>out_triangles</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double &amp;</td>          <td class="paramname"><span class="paramname"><em>scale</em><span class="paramdefsep"> = </span><span class="paramdefval">1000</span></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create a mesh loft from a set of polylines with holes "VNF" stands for "vertices, normals, faces</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">polylines_with_holes</td><td>polylines in the order: top, bottom, top, bottom, top, bottom, ... </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">out_vertices</td><td>vertex coordinates: x,y,z,x,y,z,x,y,z,... </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">out_normals</td><td>vertex normals: x,y,z,x,y,z,x,y,z,... </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">out_triangles</td><td>triangle indices: i,j,k,i,j,k,i,j,k,... </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">scale</td><td>scale factor to convert scale the output geometry for <a class="el" href="namespaceviewer__wood.html">viewer_wood</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>mesh vertices and faces in a form of Eigen matrices to be compatible with pybind11 </dd></dl>

<p class="definition">Definition at line <a class="el" href="cgal__polyline__mesh__util_8cpp_source.html#l00489">489</a> of file <a class="el" href="cgal__polyline__mesh__util_8cpp_source.html">cgal_polyline_mesh_util.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  490</span>    {</div>
<div class="line"><span class="lineno">  492</span>        <span class="comment">// Sanity Check</span></div>
<div class="line"><span class="lineno">  494</span>        <span class="comment">// RowMatrixXd v_empty(0, 0);</span></div>
<div class="line"><span class="lineno">  495</span>        <span class="comment">// RowMatrixXi f_empty(0, 0);</span></div>
<div class="line"><span class="lineno">  496</span>        <span class="comment">// auto empty_tuple = std::make_tuple(v_empty, f_empty);</span></div>
<div class="line"><span class="lineno">  497</span> </div>
<div class="line"><span class="lineno">  498</span>        std::vector&lt;CGAL_Polyline&gt; polylines_with_holes;</div>
<div class="line"><span class="lineno">  499</span>        polylines_with_holes.reserve(polylines_with_holes_not_clean.size());</div>
<div class="line"><span class="lineno">  500</span> </div>
<div class="line"><span class="lineno">  501</span>        <span class="comment">// ignore line segments with less than 2 points</span></div>
<div class="line"><span class="lineno">  502</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;polyline : polylines_with_holes_not_clean)</div>
<div class="line"><span class="lineno">  503</span>            if (polyline.size() &gt; 2)</div>
<div class="line"><span class="lineno">  504</span>                polylines_with_holes.emplace_back(polyline);</div>
<div class="line"><span class="lineno">  505</span> </div>
<div class="line"><span class="lineno">  506</span>        <span class="comment">// if there polyline pairs are not even, return empty mesh</span></div>
<div class="line"><span class="lineno">  507</span>        <span class="keywordflow">if</span> (polylines_with_holes_not_clean.size() % 2 == 1)</div>
<div class="line"><span class="lineno">  508</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  509</span> </div>
<div class="line"><span class="lineno">  510</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = 0; i &lt; polylines_with_holes.size(); i += 2)</div>
<div class="line"><span class="lineno">  511</span>        {</div>
<div class="line"><span class="lineno">  512</span>            <span class="keyword">auto</span> a = polylines_with_holes[i].size();</div>
<div class="line"><span class="lineno">  513</span>            <span class="keyword">auto</span> b = polylines_with_holes[i + 1].size();</div>
<div class="line"><span class="lineno">  514</span>            <span class="keywordflow">if</span> (a != b)</div>
<div class="line"><span class="lineno">  515</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  516</span>            <span class="keywordflow">if</span> (a &lt; 2 || b &lt; 2)</div>
<div class="line"><span class="lineno">  517</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  518</span>        }</div>
<div class="line"><span class="lineno">  519</span> </div>
<div class="line"><span class="lineno">  521</span>        <span class="comment">// Clean duplicate points</span></div>
<div class="line"><span class="lineno">  523</span>        std::vector&lt;CGAL_Polyline&gt; polylines(polylines_with_holes.size());</div>
<div class="line"><span class="lineno">  524</span> </div>
<div class="line"><span class="lineno">  525</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = 0; i &lt; polylines_with_holes.size(); i += 2)</div>
<div class="line"><span class="lineno">  526</span>        {</div>
<div class="line"><span class="lineno">  527</span>            polylines[i + 0].reserve(polylines_with_holes[i + 0].size());</div>
<div class="line"><span class="lineno">  528</span>            polylines[i + 1].reserve(polylines_with_holes[i + 1].size());</div>
<div class="line"><span class="lineno">  529</span>            polylines[i + 0].emplace_back(polylines_with_holes[i + 0][0]);</div>
<div class="line"><span class="lineno">  530</span>            polylines[i + 1].emplace_back(polylines_with_holes[i + 1][0]);</div>
<div class="line"><span class="lineno">  531</span>            <span class="keywordflow">for</span> (<span class="keyword">auto</span> j = 1; j &lt; polylines_with_holes[i + 0].size(); j++)</div>
<div class="line"><span class="lineno">  532</span>            {</div>
<div class="line"><span class="lineno">  533</span>                <span class="keywordflow">if</span> (CGAL::squared_distance(polylines_with_holes[i + 0][j - 1], polylines_with_holes[i + 0][j]) &gt; <a class="code hl_variable" href="namespacewood__globals.html#a4829ca446b4f022ee5c396fde5fbcfb9">wood_globals::DISTANCE_SQUARED</a>)</div>
<div class="line"><span class="lineno">  534</span>                {</div>
<div class="line"><span class="lineno">  535</span>                    polylines[i + 0].emplace_back(polylines_with_holes[i + 0][j]);</div>
<div class="line"><span class="lineno">  536</span>                    polylines[i + 1].emplace_back(polylines_with_holes[i + 1][j]);</div>
<div class="line"><span class="lineno">  537</span>                }</div>
<div class="line"><span class="lineno">  538</span>            }</div>
<div class="line"><span class="lineno">  539</span>        }</div>
<div class="line"><span class="lineno">  540</span> </div>
<div class="line"><span class="lineno">  542</span>        <span class="comment">// Compute average normal and create a plane</span></div>
<div class="line"><span class="lineno">  544</span>        <span class="keyword">auto</span> lastID = polylines.size() - 2;</div>
<div class="line"><span class="lineno">  545</span>        <span class="keyword">auto</span> len = polylines[lastID].size() - 1;</div>
<div class="line"><span class="lineno">  546</span>        IK::Vector_3 <a class="code hl_function" href="namespacecgal__vector__util.html#a52e682fcb8da342a677a576c87b5a98d">average_normal</a> = IK::Vector_3(0, 0, 0);</div>
<div class="line"><span class="lineno">  547</span> </div>
<div class="line"><span class="lineno">  548</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = 0; i &lt; len; i++)</div>
<div class="line"><span class="lineno">  549</span>        {</div>
<div class="line"><span class="lineno">  550</span>            <span class="keyword">auto</span> prev = ((i - 1) + len) % len;</div>
<div class="line"><span class="lineno">  551</span>            <span class="keyword">auto</span> next = ((i + 1) + len) % len;</div>
<div class="line"><span class="lineno">  552</span>            <a class="code hl_function" href="namespacecgal__vector__util.html#a52e682fcb8da342a677a576c87b5a98d">average_normal</a> = <a class="code hl_function" href="namespacecgal__vector__util.html#a52e682fcb8da342a677a576c87b5a98d">average_normal</a> + CGAL::cross_product(polylines[lastID][i] - polylines[lastID][prev], polylines[lastID][next] - polylines[lastID][i]);</div>
<div class="line"><span class="lineno">  553</span>        }</div>
<div class="line"><span class="lineno">  554</span>        internal::unitize(average_normal);</div>
<div class="line"><span class="lineno">  555</span> </div>
<div class="line"><span class="lineno">  556</span>        <span class="comment">// flip if needed</span></div>
<div class="line"><span class="lineno">  557</span>        IK::Plane_3 base_plane(polylines[lastID][0], average_normal);</div>
<div class="line"><span class="lineno">  558</span>        <span class="keywordflow">if</span> (base_plane.has_on_positive_side(polylines[polylines.size() - 1][0]))</div>
<div class="line"><span class="lineno">  559</span>            <a class="code hl_function" href="namespacecgal__vector__util.html#a52e682fcb8da342a677a576c87b5a98d">average_normal</a> *= -1;</div>
<div class="line"><span class="lineno">  560</span> </div>
<div class="line"><span class="lineno">  562</span>        <span class="comment">// Create a mesh for top outlines</span></div>
<div class="line"><span class="lineno">  564</span>        std::vector&lt;int&gt; top_outline_face_vertex_indices;</div>
<div class="line"><span class="lineno">  565</span>        <span class="keywordtype">int</span> v, f;</div>
<div class="line"><span class="lineno">  566</span>        <a class="code hl_function" href="#a674e7fb633ab33270fc4287643dad4ed">mesh_from_polylines</a>(polylines, base_plane, top_outline_face_vertex_indices, v, f);</div>
<div class="line"><span class="lineno">  567</span> </div>
<div class="line"><span class="lineno">  569</span>        <span class="comment">// Create mesh for the full plate</span></div>
<div class="line"><span class="lineno">  571</span> </div>
<div class="line"><span class="lineno">  573</span>        <span class="comment">// -&gt; Count vertices and faces</span></div>
<div class="line"><span class="lineno">  575</span> </div>
<div class="line"><span class="lineno">  576</span>        <span class="keywordtype">size_t</span> vertex_count = 0;</div>
<div class="line"><span class="lineno">  577</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; polylines.size(); i += 2)</div>
<div class="line"><span class="lineno">  578</span>            vertex_count += polylines[i].size() - 1;</div>
<div class="line"><span class="lineno">  579</span> </div>
<div class="line"><span class="lineno">  580</span>        <span class="keywordflow">if</span> (v != vertex_count)</div>
<div class="line"><span class="lineno">  581</span>        {</div>
<div class="line"><span class="lineno">  582</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  583</span>        }</div>
<div class="line"><span class="lineno">  584</span> </div>
<div class="line"><span class="lineno">  585</span>        <span class="keyword">auto</span> face_count = top_outline_face_vertex_indices.size() / 3;</div>
<div class="line"><span class="lineno">  586</span> </div>
<div class="line"><span class="lineno">  587</span>        std::vector&lt;float&gt; out_vertices_temp;</div>
<div class="line"><span class="lineno">  588</span>        out_vertices_temp.reserve(vertex_count * 2 * 3);</div>
<div class="line"><span class="lineno">  589</span>        out_vertices.reserve(face_count * 2 * 3);</div>
<div class="line"><span class="lineno">  590</span>        out_normals.reserve(face_count * 2 * 3);</div>
<div class="line"><span class="lineno">  591</span>        out_triangles.reserve(face_count * 2 * 3);</div>
<div class="line"><span class="lineno">  592</span> </div>
<div class="line"><span class="lineno">  594</span>        <span class="comment">// -&gt; Top vertices</span></div>
<div class="line"><span class="lineno">  596</span> </div>
<div class="line"><span class="lineno">  597</span>        <span class="comment">// Set vertex coordinates from all polylines a-b a-b</span></div>
<div class="line"><span class="lineno">  598</span>        <span class="keywordtype">int</span> vid = 0;</div>
<div class="line"><span class="lineno">  599</span>        std::vector&lt;std::array&lt;int, 4&gt;&gt; sides;</div>
<div class="line"><span class="lineno">  600</span>        sides.reserve(vertex_count);</div>
<div class="line"><span class="lineno">  601</span> </div>
<div class="line"><span class="lineno">  602</span>        <span class="keywordtype">bool</span> holes = polylines.size() &gt; 2;</div>
<div class="line"><span class="lineno">  603</span> </div>
<div class="line"><span class="lineno">  604</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = 0; i &lt; polylines.size(); i += 2)</div>
<div class="line"><span class="lineno">  605</span>        {</div>
<div class="line"><span class="lineno">  606</span>            <span class="keywordtype">bool</span> last = i == (polylines.size() - 2);</div>
<div class="line"><span class="lineno">  607</span> </div>
<div class="line"><span class="lineno">  608</span>            <span class="keywordflow">for</span> (<span class="keyword">auto</span> j = 0; j &lt; polylines[i].size() - 1; j++)</div>
<div class="line"><span class="lineno">  609</span>            {</div>
<div class="line"><span class="lineno">  610</span>                <span class="comment">// vertices</span></div>
<div class="line"><span class="lineno">  611</span>                out_vertices_temp.emplace_back((<span class="keywordtype">float</span>)polylines[i][j].hx() / <a class="code hl_variable" href="namespaceviewer__wood.html#a35a35d5d375e5681345d05c5a1db59b5">scale</a>);</div>
<div class="line"><span class="lineno">  612</span>                out_vertices_temp.emplace_back((<span class="keywordtype">float</span>)polylines[i][j].hy() / <a class="code hl_variable" href="namespaceviewer__wood.html#a35a35d5d375e5681345d05c5a1db59b5">scale</a>);</div>
<div class="line"><span class="lineno">  613</span>                out_vertices_temp.emplace_back((<span class="keywordtype">float</span>)polylines[i][j].hz() / <a class="code hl_variable" href="namespaceviewer__wood.html#a35a35d5d375e5681345d05c5a1db59b5">scale</a>);</div>
<div class="line"><span class="lineno">  614</span> </div>
<div class="line"><span class="lineno">  615</span>                <span class="comment">// last faces</span></div>
<div class="line"><span class="lineno">  616</span>                <span class="keywordflow">if</span> (j == polylines[i].size() - 2)</div>
<div class="line"><span class="lineno">  617</span>                { <span class="comment">// take vertices from beggining</span></div>
<div class="line"><span class="lineno">  618</span>                    <span class="keyword">auto</span> n = polylines[i].size() - 2;</div>
<div class="line"><span class="lineno">  619</span>                    std::array&lt;int, 4&gt; side{vid, vid - (int)n, vid - (<span class="keywordtype">int</span>)n + (int)vertex_count, vid + 0 + (<span class="keywordtype">int</span>)vertex_count};</div>
<div class="line"><span class="lineno">  620</span> </div>
<div class="line"><span class="lineno">  621</span>                    <span class="keywordflow">if</span> (holes)</div>
<div class="line"><span class="lineno">  622</span>                    {</div>
<div class="line"><span class="lineno">  623</span>                        sides.emplace_back(side);</div>
<div class="line"><span class="lineno">  624</span>                    }</div>
<div class="line"><span class="lineno">  625</span>                    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  626</span>                    {</div>
<div class="line"><span class="lineno">  627</span>                        sides.emplace_back(side);</div>
<div class="line"><span class="lineno">  628</span>                    }</div>
<div class="line"><span class="lineno">  629</span>                }</div>
<div class="line"><span class="lineno">  630</span>                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  631</span>                { <span class="comment">// take next vertices</span></div>
<div class="line"><span class="lineno">  632</span>                    std::array&lt;int, 4&gt; side = {</div>
<div class="line"><span class="lineno">  633</span>                        vid + 0 + (int)vertex_count,</div>
<div class="line"><span class="lineno">  634</span>                        vid + 1 + (<span class="keywordtype">int</span>)vertex_count,</div>
<div class="line"><span class="lineno">  635</span>                        vid + 1,</div>
<div class="line"><span class="lineno">  636</span>                        vid,</div>
<div class="line"><span class="lineno">  637</span>                    };</div>
<div class="line"><span class="lineno">  638</span> </div>
<div class="line"><span class="lineno">  639</span>                    <span class="keywordflow">if</span> (holes)</div>
<div class="line"><span class="lineno">  640</span>                    {</div>
<div class="line"><span class="lineno">  641</span> </div>
<div class="line"><span class="lineno">  642</span>                        side = {</div>
<div class="line"><span class="lineno">  643</span>                            vid,</div>
<div class="line"><span class="lineno">  644</span>                            vid + 1,</div>
<div class="line"><span class="lineno">  645</span>                            vid + 1 + (int)vertex_count,</div>
<div class="line"><span class="lineno">  646</span>                            vid + 0 + (<span class="keywordtype">int</span>)vertex_count,</div>
<div class="line"><span class="lineno">  647</span>                        };</div>
<div class="line"><span class="lineno">  648</span>                        sides.emplace_back(side);</div>
<div class="line"><span class="lineno">  649</span>                    }</div>
<div class="line"><span class="lineno">  650</span>                    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  651</span>                    {</div>
<div class="line"><span class="lineno">  652</span>                        side = {</div>
<div class="line"><span class="lineno">  653</span>                            vid,</div>
<div class="line"><span class="lineno">  654</span>                            vid + 1,</div>
<div class="line"><span class="lineno">  655</span>                            vid + 1 + (int)vertex_count,</div>
<div class="line"><span class="lineno">  656</span>                            vid + 0 + (<span class="keywordtype">int</span>)vertex_count,</div>
<div class="line"><span class="lineno">  657</span>                        };</div>
<div class="line"><span class="lineno">  658</span>                        sides.emplace_back(side);</div>
<div class="line"><span class="lineno">  659</span>                    }</div>
<div class="line"><span class="lineno">  660</span>                }</div>
<div class="line"><span class="lineno">  661</span> </div>
<div class="line"><span class="lineno">  662</span>                vid++;</div>
<div class="line"><span class="lineno">  663</span>            }</div>
<div class="line"><span class="lineno">  664</span>        }</div>
<div class="line"><span class="lineno">  665</span> </div>
<div class="line"><span class="lineno">  667</span>        <span class="comment">// -&gt; Bottom vertices</span></div>
<div class="line"><span class="lineno">  669</span> </div>
<div class="line"><span class="lineno">  670</span>        vid = 0;</div>
<div class="line"><span class="lineno">  671</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = 0; i &lt; polylines.size(); i += 2)</div>
<div class="line"><span class="lineno">  672</span>        {</div>
<div class="line"><span class="lineno">  673</span>            <span class="keywordflow">for</span> (<span class="keyword">auto</span> j = 0; j &lt; polylines[i].size() - 1; j++)</div>
<div class="line"><span class="lineno">  674</span>            {</div>
<div class="line"><span class="lineno">  675</span>                <span class="comment">// vertices</span></div>
<div class="line"><span class="lineno">  676</span>                out_vertices_temp.emplace_back((<span class="keywordtype">float</span>)polylines[i + 1][j].hx() / <a class="code hl_variable" href="namespaceviewer__wood.html#a35a35d5d375e5681345d05c5a1db59b5">scale</a>);</div>
<div class="line"><span class="lineno">  677</span>                out_vertices_temp.emplace_back((<span class="keywordtype">float</span>)polylines[i + 1][j].hy() / <a class="code hl_variable" href="namespaceviewer__wood.html#a35a35d5d375e5681345d05c5a1db59b5">scale</a>);</div>
<div class="line"><span class="lineno">  678</span>                out_vertices_temp.emplace_back((<span class="keywordtype">float</span>)polylines[i + 1][j].hz() / <a class="code hl_variable" href="namespaceviewer__wood.html#a35a35d5d375e5681345d05c5a1db59b5">scale</a>);</div>
<div class="line"><span class="lineno">  679</span>                vid++;</div>
<div class="line"><span class="lineno">  680</span>            }</div>
<div class="line"><span class="lineno">  681</span>        }</div>
<div class="line"><span class="lineno">  682</span> </div>
<div class="line"><span class="lineno">  684</span>        <span class="comment">// -&gt; Top face indices</span></div>
<div class="line"><span class="lineno">  686</span> </div>
<div class="line"><span class="lineno">  687</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; top_outline_face_vertex_indices.size(); i += 3)</div>
<div class="line"><span class="lineno">  688</span>        {</div>
<div class="line"><span class="lineno">  689</span>            <span class="keywordtype">int</span> fid = i / 3;</div>
<div class="line"><span class="lineno">  690</span>            <span class="keywordtype">int</span> a = top_outline_face_vertex_indices[i + 0];</div>
<div class="line"><span class="lineno">  691</span>            <span class="keywordtype">int</span> b = top_outline_face_vertex_indices[i + 1];</div>
<div class="line"><span class="lineno">  692</span>            <span class="keywordtype">int</span> c = top_outline_face_vertex_indices[i + 2];</div>
<div class="line"><span class="lineno">  693</span> </div>
<div class="line"><span class="lineno">  694</span>            <span class="keywordtype">int</span> v_count = out_triangles.size();</div>
<div class="line"><span class="lineno">  695</span>            out_triangles.emplace_back(out_triangles.size());</div>
<div class="line"><span class="lineno">  696</span>            out_triangles.emplace_back(out_triangles.size());</div>
<div class="line"><span class="lineno">  697</span>            out_triangles.emplace_back(out_triangles.size());</div>
<div class="line"><span class="lineno">  698</span> </div>
<div class="line"><span class="lineno">  699</span>            out_vertices.emplace_back(out_vertices_temp[a * 3 + 0]);</div>
<div class="line"><span class="lineno">  700</span>            out_vertices.emplace_back(out_vertices_temp[a * 3 + 1]);</div>
<div class="line"><span class="lineno">  701</span>            out_vertices.emplace_back(out_vertices_temp[a * 3 + 2]);</div>
<div class="line"><span class="lineno">  702</span> </div>
<div class="line"><span class="lineno">  703</span>            out_vertices.emplace_back(out_vertices_temp[b * 3 + 0]);</div>
<div class="line"><span class="lineno">  704</span>            out_vertices.emplace_back(out_vertices_temp[b * 3 + 1]);</div>
<div class="line"><span class="lineno">  705</span>            out_vertices.emplace_back(out_vertices_temp[b * 3 + 2]);</div>
<div class="line"><span class="lineno">  706</span> </div>
<div class="line"><span class="lineno">  707</span>            out_vertices.emplace_back(out_vertices_temp[c * 3 + 0]);</div>
<div class="line"><span class="lineno">  708</span>            out_vertices.emplace_back(out_vertices_temp[c * 3 + 1]);</div>
<div class="line"><span class="lineno">  709</span>            out_vertices.emplace_back(out_vertices_temp[c * 3 + 2]);</div>
<div class="line"><span class="lineno">  710</span> </div>
<div class="line"><span class="lineno">  711</span>            <span class="comment">// std::cout &lt;&lt; out_vertices_temp[a * 3 + 0] &lt;&lt; &quot; &quot; &lt;&lt; out_vertices_temp[a * 3 + 1] &lt;&lt; &quot; &quot; &lt;&lt; out_vertices_temp[a * 3 + 2] &lt;&lt; &quot;\n&quot;;</span></div>
<div class="line"><span class="lineno">  712</span>            <span class="comment">// std::cout &lt;&lt; out_vertices_temp[b * 3 + 0] &lt;&lt; &quot; &quot; &lt;&lt; out_vertices_temp[b * 3 + 1] &lt;&lt; &quot; &quot; &lt;&lt; out_vertices_temp[b * 3 + 2] &lt;&lt; &quot;\n&quot;;</span></div>
<div class="line"><span class="lineno">  713</span>            <span class="comment">// std::cout &lt;&lt; out_vertices_temp[c * 3 + 0] &lt;&lt; &quot; &quot; &lt;&lt; out_vertices_temp[c * 3 + 1] &lt;&lt; &quot; &quot; &lt;&lt; out_vertices_temp[c * 3 + 2] &lt;&lt; &quot;\n&quot;;</span></div>
<div class="line"><span class="lineno">  714</span> </div>
<div class="line"><span class="lineno">  715</span>            out_normals.emplace_back(<a class="code hl_function" href="namespacecgal__vector__util.html#a52e682fcb8da342a677a576c87b5a98d">average_normal</a>.hx());</div>
<div class="line"><span class="lineno">  716</span>            out_normals.emplace_back(<a class="code hl_function" href="namespacecgal__vector__util.html#a52e682fcb8da342a677a576c87b5a98d">average_normal</a>.hy());</div>
<div class="line"><span class="lineno">  717</span>            out_normals.emplace_back(<a class="code hl_function" href="namespacecgal__vector__util.html#a52e682fcb8da342a677a576c87b5a98d">average_normal</a>.hz());</div>
<div class="line"><span class="lineno">  718</span> </div>
<div class="line"><span class="lineno">  719</span>            out_normals.emplace_back(<a class="code hl_function" href="namespacecgal__vector__util.html#a52e682fcb8da342a677a576c87b5a98d">average_normal</a>.hx());</div>
<div class="line"><span class="lineno">  720</span>            out_normals.emplace_back(<a class="code hl_function" href="namespacecgal__vector__util.html#a52e682fcb8da342a677a576c87b5a98d">average_normal</a>.hy());</div>
<div class="line"><span class="lineno">  721</span>            out_normals.emplace_back(<a class="code hl_function" href="namespacecgal__vector__util.html#a52e682fcb8da342a677a576c87b5a98d">average_normal</a>.hz());</div>
<div class="line"><span class="lineno">  722</span> </div>
<div class="line"><span class="lineno">  723</span>            out_normals.emplace_back(<a class="code hl_function" href="namespacecgal__vector__util.html#a52e682fcb8da342a677a576c87b5a98d">average_normal</a>.hx());</div>
<div class="line"><span class="lineno">  724</span>            out_normals.emplace_back(<a class="code hl_function" href="namespacecgal__vector__util.html#a52e682fcb8da342a677a576c87b5a98d">average_normal</a>.hy());</div>
<div class="line"><span class="lineno">  725</span>            out_normals.emplace_back(<a class="code hl_function" href="namespacecgal__vector__util.html#a52e682fcb8da342a677a576c87b5a98d">average_normal</a>.hz());</div>
<div class="line"><span class="lineno">  726</span>        }</div>
<div class="line"><span class="lineno">  727</span> </div>
<div class="line"><span class="lineno">  729</span>        <span class="comment">// -&gt; Bottom face indices</span></div>
<div class="line"><span class="lineno">  731</span> </div>
<div class="line"><span class="lineno">  732</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; top_outline_face_vertex_indices.size(); i += 3)</div>
<div class="line"><span class="lineno">  733</span>        {</div>
<div class="line"><span class="lineno">  734</span>            <span class="keywordtype">int</span> fid = i / 3;</div>
<div class="line"><span class="lineno">  735</span>            <span class="keywordtype">int</span> a = (int)vertex_count + top_outline_face_vertex_indices[i + 2];</div>
<div class="line"><span class="lineno">  736</span>            <span class="keywordtype">int</span> b = (int)vertex_count + top_outline_face_vertex_indices[i + 1];</div>
<div class="line"><span class="lineno">  737</span>            <span class="keywordtype">int</span> c = (int)vertex_count + top_outline_face_vertex_indices[i + 0];</div>
<div class="line"><span class="lineno">  738</span> </div>
<div class="line"><span class="lineno">  739</span>            <span class="keywordtype">int</span> v_count = out_triangles.size();</div>
<div class="line"><span class="lineno">  740</span>            out_triangles.emplace_back(out_triangles.size());</div>
<div class="line"><span class="lineno">  741</span>            out_triangles.emplace_back(out_triangles.size());</div>
<div class="line"><span class="lineno">  742</span>            out_triangles.emplace_back(out_triangles.size());</div>
<div class="line"><span class="lineno">  743</span> </div>
<div class="line"><span class="lineno">  744</span>            out_vertices.emplace_back(out_vertices_temp[a * 3 + 0]);</div>
<div class="line"><span class="lineno">  745</span>            out_vertices.emplace_back(out_vertices_temp[a * 3 + 1]);</div>
<div class="line"><span class="lineno">  746</span>            out_vertices.emplace_back(out_vertices_temp[a * 3 + 2]);</div>
<div class="line"><span class="lineno">  747</span> </div>
<div class="line"><span class="lineno">  748</span>            out_vertices.emplace_back(out_vertices_temp[b * 3 + 0]);</div>
<div class="line"><span class="lineno">  749</span>            out_vertices.emplace_back(out_vertices_temp[b * 3 + 1]);</div>
<div class="line"><span class="lineno">  750</span>            out_vertices.emplace_back(out_vertices_temp[b * 3 + 2]);</div>
<div class="line"><span class="lineno">  751</span> </div>
<div class="line"><span class="lineno">  752</span>            out_vertices.emplace_back(out_vertices_temp[c * 3 + 0]);</div>
<div class="line"><span class="lineno">  753</span>            out_vertices.emplace_back(out_vertices_temp[c * 3 + 1]);</div>
<div class="line"><span class="lineno">  754</span>            out_vertices.emplace_back(out_vertices_temp[c * 3 + 2]);</div>
<div class="line"><span class="lineno">  755</span> </div>
<div class="line"><span class="lineno">  756</span>            <span class="comment">// std::cout &lt;&lt; out_vertices_temp[a * 3 + 0] &lt;&lt; &quot; &quot; &lt;&lt; out_vertices_temp[a * 3 + 1] &lt;&lt; &quot; &quot; &lt;&lt; out_vertices_temp[a * 3 + 2] &lt;&lt; &quot;\n&quot;;</span></div>
<div class="line"><span class="lineno">  757</span>            <span class="comment">// std::cout &lt;&lt; out_vertices_temp[b * 3 + 0] &lt;&lt; &quot; &quot; &lt;&lt; out_vertices_temp[b * 3 + 1] &lt;&lt; &quot; &quot; &lt;&lt; out_vertices_temp[b * 3 + 2] &lt;&lt; &quot;\n&quot;;</span></div>
<div class="line"><span class="lineno">  758</span>            <span class="comment">// std::cout &lt;&lt; out_vertices_temp[c * 3 + 0] &lt;&lt; &quot; &quot; &lt;&lt; out_vertices_temp[c * 3 + 1] &lt;&lt; &quot; &quot; &lt;&lt; out_vertices_temp[c * 3 + 2] &lt;&lt; &quot;\n&quot;;</span></div>
<div class="line"><span class="lineno">  759</span> </div>
<div class="line"><span class="lineno">  760</span>            out_normals.emplace_back(-<a class="code hl_function" href="namespacecgal__vector__util.html#a52e682fcb8da342a677a576c87b5a98d">average_normal</a>.hx());</div>
<div class="line"><span class="lineno">  761</span>            out_normals.emplace_back(-<a class="code hl_function" href="namespacecgal__vector__util.html#a52e682fcb8da342a677a576c87b5a98d">average_normal</a>.hy());</div>
<div class="line"><span class="lineno">  762</span>            out_normals.emplace_back(-<a class="code hl_function" href="namespacecgal__vector__util.html#a52e682fcb8da342a677a576c87b5a98d">average_normal</a>.hz());</div>
<div class="line"><span class="lineno">  763</span> </div>
<div class="line"><span class="lineno">  764</span>            out_normals.emplace_back(-<a class="code hl_function" href="namespacecgal__vector__util.html#a52e682fcb8da342a677a576c87b5a98d">average_normal</a>.hx());</div>
<div class="line"><span class="lineno">  765</span>            out_normals.emplace_back(-<a class="code hl_function" href="namespacecgal__vector__util.html#a52e682fcb8da342a677a576c87b5a98d">average_normal</a>.hy());</div>
<div class="line"><span class="lineno">  766</span>            out_normals.emplace_back(-<a class="code hl_function" href="namespacecgal__vector__util.html#a52e682fcb8da342a677a576c87b5a98d">average_normal</a>.hz());</div>
<div class="line"><span class="lineno">  767</span> </div>
<div class="line"><span class="lineno">  768</span>            out_normals.emplace_back(-<a class="code hl_function" href="namespacecgal__vector__util.html#a52e682fcb8da342a677a576c87b5a98d">average_normal</a>.hx());</div>
<div class="line"><span class="lineno">  769</span>            out_normals.emplace_back(-<a class="code hl_function" href="namespacecgal__vector__util.html#a52e682fcb8da342a677a576c87b5a98d">average_normal</a>.hy());</div>
<div class="line"><span class="lineno">  770</span>            out_normals.emplace_back(-<a class="code hl_function" href="namespacecgal__vector__util.html#a52e682fcb8da342a677a576c87b5a98d">average_normal</a>.hz());</div>
<div class="line"><span class="lineno">  771</span>        }</div>
<div class="line"><span class="lineno">  772</span> </div>
<div class="line"><span class="lineno">  774</span>        <span class="comment">// -&gt; Side face indices</span></div>
<div class="line"><span class="lineno">  776</span> </div>
<div class="line"><span class="lineno">  777</span>        <span class="comment">// CGAL_Debug(sides.size());</span></div>
<div class="line"><span class="lineno">  778</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; sides.size(); i++)</div>
<div class="line"><span class="lineno">  779</span>        {</div>
<div class="line"><span class="lineno">  780</span>            <span class="keywordtype">int</span> a0 = sides[i][3];</div>
<div class="line"><span class="lineno">  781</span>            <span class="keywordtype">int</span> b0 = sides[i][2];</div>
<div class="line"><span class="lineno">  782</span>            <span class="keywordtype">int</span> c0 = sides[i][1];</div>
<div class="line"><span class="lineno">  783</span> </div>
<div class="line"><span class="lineno">  784</span>            <span class="keywordtype">int</span> a1 = sides[i][3];</div>
<div class="line"><span class="lineno">  785</span>            <span class="keywordtype">int</span> b1 = sides[i][1];</div>
<div class="line"><span class="lineno">  786</span>            <span class="keywordtype">int</span> c1 = sides[i][0];</div>
<div class="line"><span class="lineno">  787</span> </div>
<div class="line"><span class="lineno">  788</span>            out_triangles.emplace_back(out_triangles.size());</div>
<div class="line"><span class="lineno">  789</span>            out_triangles.emplace_back(out_triangles.size());</div>
<div class="line"><span class="lineno">  790</span>            out_triangles.emplace_back(out_triangles.size());</div>
<div class="line"><span class="lineno">  791</span> </div>
<div class="line"><span class="lineno">  792</span>            out_triangles.emplace_back(out_triangles.size());</div>
<div class="line"><span class="lineno">  793</span>            out_triangles.emplace_back(out_triangles.size());</div>
<div class="line"><span class="lineno">  794</span>            out_triangles.emplace_back(out_triangles.size());</div>
<div class="line"><span class="lineno">  795</span> </div>
<div class="line"><span class="lineno">  796</span>            out_vertices.emplace_back(out_vertices_temp[a0 * 3 + 0]);</div>
<div class="line"><span class="lineno">  797</span>            out_vertices.emplace_back(out_vertices_temp[a0 * 3 + 1]);</div>
<div class="line"><span class="lineno">  798</span>            out_vertices.emplace_back(out_vertices_temp[a0 * 3 + 2]);</div>
<div class="line"><span class="lineno">  799</span> </div>
<div class="line"><span class="lineno">  800</span>            out_vertices.emplace_back(out_vertices_temp[b0 * 3 + 0]);</div>
<div class="line"><span class="lineno">  801</span>            out_vertices.emplace_back(out_vertices_temp[b0 * 3 + 1]);</div>
<div class="line"><span class="lineno">  802</span>            out_vertices.emplace_back(out_vertices_temp[b0 * 3 + 2]);</div>
<div class="line"><span class="lineno">  803</span> </div>
<div class="line"><span class="lineno">  804</span>            out_vertices.emplace_back(out_vertices_temp[c0 * 3 + 0]);</div>
<div class="line"><span class="lineno">  805</span>            out_vertices.emplace_back(out_vertices_temp[c0 * 3 + 1]);</div>
<div class="line"><span class="lineno">  806</span>            out_vertices.emplace_back(out_vertices_temp[c0 * 3 + 2]);</div>
<div class="line"><span class="lineno">  807</span> </div>
<div class="line"><span class="lineno">  808</span>            out_vertices.emplace_back(out_vertices_temp[a1 * 3 + 0]);</div>
<div class="line"><span class="lineno">  809</span>            out_vertices.emplace_back(out_vertices_temp[a1 * 3 + 1]);</div>
<div class="line"><span class="lineno">  810</span>            out_vertices.emplace_back(out_vertices_temp[a1 * 3 + 2]);</div>
<div class="line"><span class="lineno">  811</span> </div>
<div class="line"><span class="lineno">  812</span>            out_vertices.emplace_back(out_vertices_temp[b1 * 3 + 0]);</div>
<div class="line"><span class="lineno">  813</span>            out_vertices.emplace_back(out_vertices_temp[b1 * 3 + 1]);</div>
<div class="line"><span class="lineno">  814</span>            out_vertices.emplace_back(out_vertices_temp[b1 * 3 + 2]);</div>
<div class="line"><span class="lineno">  815</span> </div>
<div class="line"><span class="lineno">  816</span>            out_vertices.emplace_back(out_vertices_temp[c1 * 3 + 0]);</div>
<div class="line"><span class="lineno">  817</span>            out_vertices.emplace_back(out_vertices_temp[c1 * 3 + 1]);</div>
<div class="line"><span class="lineno">  818</span>            out_vertices.emplace_back(out_vertices_temp[c1 * 3 + 2]);</div>
<div class="line"><span class="lineno">  819</span> </div>
<div class="line"><span class="lineno">  820</span>            <span class="comment">// std::cout &lt;&lt; out_vertices_temp[a0 * 3 + 0] &lt;&lt; &quot; &quot; &lt;&lt; out_vertices_temp[a0 * 3 + 1] &lt;&lt; &quot; &quot; &lt;&lt; out_vertices_temp[a0 * 3 + 2] &lt;&lt; &quot;\n&quot;;</span></div>
<div class="line"><span class="lineno">  821</span>            <span class="comment">// std::cout &lt;&lt; out_vertices_temp[b0 * 3 + 0] &lt;&lt; &quot; &quot; &lt;&lt; out_vertices_temp[b0 * 3 + 1] &lt;&lt; &quot; &quot; &lt;&lt; out_vertices_temp[b0 * 3 + 2] &lt;&lt; &quot;\n&quot;;</span></div>
<div class="line"><span class="lineno">  822</span>            <span class="comment">// std::cout &lt;&lt; out_vertices_temp[c0 * 3 + 0] &lt;&lt; &quot; &quot; &lt;&lt; out_vertices_temp[c0 * 3 + 1] &lt;&lt; &quot; &quot; &lt;&lt; out_vertices_temp[c0 * 3 + 2] &lt;&lt; &quot;\n&quot;;</span></div>
<div class="line"><span class="lineno">  823</span>            <span class="comment">// std::cout &lt;&lt; out_vertices_temp[a1 * 3 + 0] &lt;&lt; &quot; &quot; &lt;&lt; out_vertices_temp[a1 * 3 + 1] &lt;&lt; &quot; &quot; &lt;&lt; out_vertices_temp[a1 * 3 + 2] &lt;&lt; &quot;\n&quot;;</span></div>
<div class="line"><span class="lineno">  824</span>            <span class="comment">// std::cout &lt;&lt; out_vertices_temp[b1 * 3 + 0] &lt;&lt; &quot; &quot; &lt;&lt; out_vertices_temp[b1 * 3 + 1] &lt;&lt; &quot; &quot; &lt;&lt; out_vertices_temp[b1 * 3 + 2] &lt;&lt; &quot;\n&quot;;</span></div>
<div class="line"><span class="lineno">  825</span>            <span class="comment">// std::cout &lt;&lt; out_vertices_temp[c1 * 3 + 0] &lt;&lt; &quot; &quot; &lt;&lt; out_vertices_temp[c1 * 3 + 1] &lt;&lt; &quot; &quot; &lt;&lt; out_vertices_temp[c1 * 3 + 2] &lt;&lt; &quot;\n&quot;;</span></div>
<div class="line"><span class="lineno">  826</span> </div>
<div class="line"><span class="lineno">  827</span>            IK::Point_3 coord_0(out_vertices_temp[a0 * 3 + 0], out_vertices_temp[a0 * 3 + 1], out_vertices_temp[a0 * 3 + 2]);</div>
<div class="line"><span class="lineno">  828</span>            IK::Point_3 coord_1(out_vertices_temp[b0 * 3 + 0], out_vertices_temp[b0 * 3 + 1], out_vertices_temp[b0 * 3 + 2]);</div>
<div class="line"><span class="lineno">  829</span>            IK::Point_3 coord_2(out_vertices_temp[c0 * 3 + 0], out_vertices_temp[c0 * 3 + 1], out_vertices_temp[c0 * 3 + 2]);</div>
<div class="line"><span class="lineno">  830</span>            IK::Vector_3 normal_0 = -CGAL::cross_product(coord_0 - coord_1, coord_2 - coord_1);</div>
<div class="line"><span class="lineno">  831</span>            internal::unitize(normal_0);</div>
<div class="line"><span class="lineno">  832</span>            <span class="comment">// std::cout &lt;&lt; normal_0.hx() &lt;&lt; &quot; &quot; &lt;&lt; normal_0.hy() &lt;&lt; &quot; &quot; &lt;&lt; normal_0.hz() &lt;&lt; &quot;\n&quot;;</span></div>
<div class="line"><span class="lineno">  833</span>            <span class="comment">// std::cout &lt;&lt; coord_1.hx() &lt;&lt; &quot; &quot; &lt;&lt; coord_1.hy() &lt;&lt; &quot; &quot; &lt;&lt; coord_1.hz() &lt;&lt; &quot;\n&quot;;</span></div>
<div class="line"><span class="lineno">  834</span> </div>
<div class="line"><span class="lineno">  835</span>            out_normals.emplace_back(normal_0.hx());</div>
<div class="line"><span class="lineno">  836</span>            out_normals.emplace_back(normal_0.hy());</div>
<div class="line"><span class="lineno">  837</span>            out_normals.emplace_back(normal_0.hz());</div>
<div class="line"><span class="lineno">  838</span> </div>
<div class="line"><span class="lineno">  839</span>            out_normals.emplace_back(normal_0.hx());</div>
<div class="line"><span class="lineno">  840</span>            out_normals.emplace_back(normal_0.hy());</div>
<div class="line"><span class="lineno">  841</span>            out_normals.emplace_back(normal_0.hz());</div>
<div class="line"><span class="lineno">  842</span> </div>
<div class="line"><span class="lineno">  843</span>            out_normals.emplace_back(normal_0.hx());</div>
<div class="line"><span class="lineno">  844</span>            out_normals.emplace_back(normal_0.hy());</div>
<div class="line"><span class="lineno">  845</span>            out_normals.emplace_back(normal_0.hz());</div>
<div class="line"><span class="lineno">  846</span> </div>
<div class="line"><span class="lineno">  847</span>            IK::Point_3 coord_3(out_vertices_temp[a1 * 3 + 0], out_vertices_temp[a1 * 3 + 1], out_vertices_temp[a1 * 3 + 2]);</div>
<div class="line"><span class="lineno">  848</span>            IK::Point_3 coord_4(out_vertices_temp[b1 * 3 + 0], out_vertices_temp[b1 * 3 + 1], out_vertices_temp[b1 * 3 + 2]);</div>
<div class="line"><span class="lineno">  849</span>            IK::Point_3 coord_5(out_vertices_temp[c1 * 3 + 0], out_vertices_temp[c1 * 3 + 1], out_vertices_temp[c1 * 3 + 2]);</div>
<div class="line"><span class="lineno">  850</span> </div>
<div class="line"><span class="lineno">  851</span>            out_normals.emplace_back(normal_0.hx());</div>
<div class="line"><span class="lineno">  852</span>            out_normals.emplace_back(normal_0.hy());</div>
<div class="line"><span class="lineno">  853</span>            out_normals.emplace_back(normal_0.hz());</div>
<div class="line"><span class="lineno">  854</span> </div>
<div class="line"><span class="lineno">  855</span>            out_normals.emplace_back(normal_0.hx());</div>
<div class="line"><span class="lineno">  856</span>            out_normals.emplace_back(normal_0.hy());</div>
<div class="line"><span class="lineno">  857</span>            out_normals.emplace_back(normal_0.hz());</div>
<div class="line"><span class="lineno">  858</span> </div>
<div class="line"><span class="lineno">  859</span>            out_normals.emplace_back(normal_0.hx());</div>
<div class="line"><span class="lineno">  860</span>            out_normals.emplace_back(normal_0.hy());</div>
<div class="line"><span class="lineno">  861</span>            out_normals.emplace_back(normal_0.hz());</div>
<div class="line"><span class="lineno">  862</span>        }</div>
<div class="line"><span class="lineno">  863</span> </div>
<div class="line"><span class="lineno">  864</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  865</span>    }</div>
<div class="ttc" id="anamespacecgal__polyline__mesh__util_html_a674e7fb633ab33270fc4287643dad4ed"><div class="ttname"><a href="#a674e7fb633ab33270fc4287643dad4ed">cgal_polyline_mesh_util::mesh_from_polylines</a></div><div class="ttdeci">void mesh_from_polylines(const std::vector&lt; CGAL_Polyline &gt; &amp;polylines_with_holes, const IK::Plane_3 &amp;base_plane, std::vector&lt; int &gt; &amp;top_outline_face_vertex_indices, int &amp;v_count, int &amp;f_count)</div><div class="ttdef"><b>Definition</b> <a href="cgal__polyline__mesh__util_8cpp_source.html#l00151">cgal_polyline_mesh_util.cpp:151</a></div></div>
<div class="ttc" id="anamespacecgal__vector__util_html_a52e682fcb8da342a677a576c87b5a98d"><div class="ttname"><a href="namespacecgal__vector__util.html#a52e682fcb8da342a677a576c87b5a98d">cgal_vector_util::average_normal</a></div><div class="ttdeci">void average_normal(const CGAL_Polyline &amp;p, IK::Vector_3 &amp;average_normal)</div><div class="ttdef"><b>Definition</b> <a href="cgal__vector__util_8cpp_source.html#l00072">cgal_vector_util.cpp:72</a></div></div>
<div class="ttc" id="anamespaceviewer__wood_html_a35a35d5d375e5681345d05c5a1db59b5"><div class="ttname"><a href="namespaceviewer__wood.html#a35a35d5d375e5681345d05c5a1db59b5">viewer_wood::scale</a></div><div class="ttdeci">float scale</div><div class="ttdef"><b>Definition</b> <a href="viewer__wood_8cpp_source.html#l00006">viewer_wood.cpp:6</a></div></div>
<div class="ttc" id="anamespacewood__globals_html_a4829ca446b4f022ee5c396fde5fbcfb9"><div class="ttname"><a href="namespacewood__globals.html#a4829ca446b4f022ee5c396fde5fbcfb9">wood_globals::DISTANCE_SQUARED</a></div><div class="ttdeci">double DISTANCE_SQUARED</div><div class="ttdef"><b>Definition</b> <a href="wood__globals_8cpp_source.html#l00014">wood_globals.cpp:14</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a674e7fb633ab33270fc4287643dad4ed" name="a674e7fb633ab33270fc4287643dad4ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a674e7fb633ab33270fc4287643dad4ed">&#9670;&#160;</a></span>mesh_from_polylines()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cgal_polyline_mesh_util::mesh_from_polylines </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; CGAL_Polyline &gt; &amp;</td>          <td class="paramname"><span class="paramname"><em>polylines_with_holes</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const IK::Plane_3 &amp;</td>          <td class="paramname"><span class="paramname"><em>base_plane</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; int &gt; &amp;</td>          <td class="paramname"><span class="paramname"><em>top_outline_face_vertex_indices</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;</td>          <td class="paramname"><span class="paramname"><em>v_count</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;</td>          <td class="paramname"><span class="paramname"><em>f_count</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create a mesh from a set of polylines with holes WARNING: polylines_with_holes input contains top and bottom polylines, example top, bottom, top, bottom, top, bottom, ..., but only top polylines are used to create the mesh</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">polylines_with_holes</td><td>polylines in the order: top, bottom, top, bottom, top, bottom, ... </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">base_plane</td><td>plane to orient to the first polyline </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">top_outline_face_vertex_indices</td><td>vector of vertex indices for top outline face </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">v_count</td><td>vertex count </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">f_count</td><td>face count </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="cgal__polyline__mesh__util_8cpp_source.html#l00151">151</a> of file <a class="el" href="cgal__polyline__mesh__util_8cpp_source.html">cgal_polyline_mesh_util.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  152</span>    {</div>
<div class="line"><span class="lineno">  154</span>        <span class="comment">// Create Transformation | Orient to 2D</span></div>
<div class="line"><span class="lineno">  156</span>        CGAL::Aff_transformation_3&lt;IK&gt; xform_toXY = internal::plane_to_xy(polylines_with_holes[0][0], base_plane);</div>
<div class="line"><span class="lineno">  157</span>        CGAL::Aff_transformation_3&lt;IK&gt; xform_toXY_Inv = xform_toXY.inverse();</div>
<div class="line"><span class="lineno">  158</span> </div>
<div class="line"><span class="lineno">  159</span>        CGALCDT CGALCDT;</div>
<div class="line"><span class="lineno">  160</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; polylines_with_holes.size(); i += 2)</div>
<div class="line"><span class="lineno">  161</span>        {</div>
<div class="line"><span class="lineno">  162</span>            Polygon_2 polygon_2d;</div>
<div class="line"><span class="lineno">  163</span>            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; polylines_with_holes[i].size() - 1; j++)</div>
<div class="line"><span class="lineno">  164</span>            {</div>
<div class="line"><span class="lineno">  165</span>                IK::Point_3 p = polylines_with_holes[i][j].transform(xform_toXY);</div>
<div class="line"><span class="lineno">  166</span>                <span class="keyword">auto</span> pt_2d = Point(p.hx(), p.hy());</div>
<div class="line"><span class="lineno">  167</span> </div>
<div class="line"><span class="lineno">  168</span>                CGALCDT::Locate_type l_t;</div>
<div class="line"><span class="lineno">  169</span>                <span class="keywordtype">int</span> l_i;</div>
<div class="line"><span class="lineno">  170</span>                CGALCDT.locate(pt_2d, l_t, l_i);</div>
<div class="line"><span class="lineno">  171</span> </div>
<div class="line"><span class="lineno">  172</span>                <span class="keywordflow">if</span> (l_t == CGALCDT::VERTEX)</div>
<div class="line"><span class="lineno">  173</span>                {</div>
<div class="line"><span class="lineno">  174</span>                    printf(<span class="stringliteral">&quot;CPP CGALCDT::VERTEX \n&quot;</span>);</div>
<div class="line"><span class="lineno">  175</span> </div>
<div class="line"><span class="lineno">  176</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  177</span>                }</div>
<div class="line"><span class="lineno">  178</span> </div>
<div class="line"><span class="lineno">  179</span>                polygon_2d.push_back(pt_2d);</div>
<div class="line"><span class="lineno">  180</span>            }</div>
<div class="line"><span class="lineno">  181</span> </div>
<div class="line"><span class="lineno">  182</span>            <span class="keywordflow">if</span> (!polygon_2d.is_simple())</div>
<div class="line"><span class="lineno">  183</span>            {</div>
<div class="line"><span class="lineno">  184</span> </div>
<div class="line"><span class="lineno">  185</span>                printf(<span class="stringliteral">&quot;CPP Not simple \n&quot;</span>);</div>
<div class="line"><span class="lineno">  186</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  187</span>            }</div>
<div class="line"><span class="lineno">  188</span> </div>
<div class="line"><span class="lineno">  190</span>            <span class="comment">// Insert the polygons into a constrained triangulation</span></div>
<div class="line"><span class="lineno">  192</span>            <span class="comment">// try</span></div>
<div class="line"><span class="lineno">  193</span>            <span class="comment">//{</span></div>
<div class="line"><span class="lineno">  194</span>            CGALCDT.insert_constraint(polygon_2d.vertices_begin(), polygon_2d.vertices_end(), <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  195</span>            <span class="comment">//}</span></div>
<div class="line"><span class="lineno">  196</span>            <span class="comment">// catch (...)//const CGALCDT::Intersection_of_constraints_exception &amp;</span></div>
<div class="line"><span class="lineno">  197</span>            <span class="comment">// {</span></div>
<div class="line"><span class="lineno">  198</span>            <span class="comment">//     printf(&quot;CPP CGALCDT::Intersection_of_constraints_exception \n&quot;);</span></div>
<div class="line"><span class="lineno">  199</span> </div>
<div class="line"><span class="lineno">  200</span>            <span class="comment">//     return;</span></div>
<div class="line"><span class="lineno">  201</span>            <span class="comment">// }</span></div>
<div class="line"><span class="lineno">  202</span>        }</div>
<div class="line"><span class="lineno">  203</span> </div>
<div class="line"><span class="lineno">  205</span>        <span class="comment">// Mark facets that are inside the domain bounded by the polygon</span></div>
<div class="line"><span class="lineno">  207</span>        internal::mark_domains(CGALCDT);</div>
<div class="line"><span class="lineno">  208</span> </div>
<div class="line"><span class="lineno">  209</span>        <span class="keywordtype">int</span> count = 0;</div>
<div class="line"><span class="lineno">  210</span>        <span class="keywordflow">for</span> (Face_handle f : CGALCDT.finite_face_handles())</div>
<div class="line"><span class="lineno">  211</span>        {</div>
<div class="line"><span class="lineno">  212</span>            <span class="keywordflow">if</span> (f-&gt;info().in_domain())</div>
<div class="line"><span class="lineno">  213</span>            {</div>
<div class="line"><span class="lineno">  214</span>                ++count;</div>
<div class="line"><span class="lineno">  215</span>            }</div>
<div class="line"><span class="lineno">  216</span>        }</div>
<div class="line"><span class="lineno">  217</span> </div>
<div class="line"><span class="lineno">  218</span>        std::map&lt;CGALCDT::Vertex_handle, int&gt; vertex_index;</div>
<div class="line"><span class="lineno">  219</span>        <span class="keywordtype">int</span> k = 0;</div>
<div class="line"><span class="lineno">  220</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> it = CGALCDT.vertices_begin(); it != CGALCDT.vertices_end(); ++it)</div>
<div class="line"><span class="lineno">  221</span>        {</div>
<div class="line"><span class="lineno">  222</span>            <span class="keyword">auto</span> p = it-&gt;point();</div>
<div class="line"><span class="lineno">  223</span>            vertex_index[it] = k;</div>
<div class="line"><span class="lineno">  224</span>            k++;</div>
<div class="line"><span class="lineno">  225</span>        }</div>
<div class="line"><span class="lineno">  226</span>        v_count = k;</div>
<div class="line"><span class="lineno">  227</span> </div>
<div class="line"><span class="lineno">  228</span>        <span class="comment">// count vertices to check if there are same number of points as in polyline</span></div>
<div class="line"><span class="lineno">  229</span>        <span class="keywordtype">size_t</span> vertex_count = 0;</div>
<div class="line"><span class="lineno">  230</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; polylines_with_holes.size(); i += 2)</div>
<div class="line"><span class="lineno">  231</span>            vertex_count += polylines_with_holes[i].size() - 1;</div>
<div class="line"><span class="lineno">  232</span> </div>
<div class="line"><span class="lineno">  233</span>        <span class="keywordflow">if</span> (v_count != vertex_count)</div>
<div class="line"><span class="lineno">  234</span>        {</div>
<div class="line"><span class="lineno">  235</span>            top_outline_face_vertex_indices = std::vector&lt;int&gt;(0);</div>
<div class="line"><span class="lineno">  236</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  237</span>        }</div>
<div class="line"><span class="lineno">  238</span> </div>
<div class="line"><span class="lineno">  239</span>        <span class="keywordtype">int</span> number_of_faces = 0;</div>
<div class="line"><span class="lineno">  240</span>        <span class="keywordflow">for</span> (Face_handle f : CGALCDT.finite_face_handles())</div>
<div class="line"><span class="lineno">  241</span>            if (f-&gt;info().in_domain())</div>
<div class="line"><span class="lineno">  242</span>                number_of_faces += 3;</div>
<div class="line"><span class="lineno">  243</span> </div>
<div class="line"><span class="lineno">  244</span>        f_count = number_of_faces / 3;</div>
<div class="line"><span class="lineno">  245</span> </div>
<div class="line"><span class="lineno">  246</span>        top_outline_face_vertex_indices.reserve(number_of_faces);</div>
<div class="line"><span class="lineno">  247</span>        <span class="keywordflow">for</span> (Face_handle f : CGALCDT.finite_face_handles())</div>
<div class="line"><span class="lineno">  248</span>        {</div>
<div class="line"><span class="lineno">  249</span>            <span class="keywordflow">if</span> (f-&gt;info().in_domain())</div>
<div class="line"><span class="lineno">  250</span>            {</div>
<div class="line"><span class="lineno">  251</span>                top_outline_face_vertex_indices.emplace_back(vertex_index[f-&gt;vertex(0)]);</div>
<div class="line"><span class="lineno">  252</span>                top_outline_face_vertex_indices.emplace_back(vertex_index[f-&gt;vertex(1)]);</div>
<div class="line"><span class="lineno">  253</span>                top_outline_face_vertex_indices.emplace_back(vertex_index[f-&gt;vertex(2)]);</div>
<div class="line"><span class="lineno">  254</span>            }</div>
<div class="line"><span class="lineno">  255</span>        }</div>
<div class="line"><span class="lineno">  256</span>    }</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacecgal__polyline__mesh__util.html">cgal_polyline_mesh_util</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
